Spruce Production Log Parser
============

About
------------
Given an HTTP server access log, produce by-day rankings of:

 1. Pages by unique hits according to timestamp, descending
 2. Pages by unique number of users, descending
 3. Users by unique page views, descending
 
Sample CSV:

> CSV
> Path,User,Timestamp
>
> /index.html,04a5d9a7-0a76-47a8-abd3-9e39a1abce50,2017-09-28T19:38:59+00:00

This program is written in Kotlin (JVM) and built using Maven. [Packaging & Running] instructions below

Running
------------
Running
- There are two ways to run the program, either via IntelliJ IDEA (IDE) or Maven 
     - Via Maven: run the below from the program root (i.e same location as the program's pom.xml) to run the build and start the program. This will also produce a jar file. For convenience, this jar is located in the target directory and is named SpruceProductionLogParser-1.0-SNAPSHOT.jar
     ``` 
        mvn clean install
     ```  
     - IntelliJ IDEA (IDE): Create a new Run Configuration with logger.AppKt as the Main Class, then choose `Run the selected configuration`

Usage
------------
1. Once the program is running, you are presented with an input request `Please enter the full path to the CSV log file: ` where you may enter the full path to a log file
2. If the parsing of the CSV was not successful, relevant error messages will be displayed. If it is successful, you'll be presented with the following menu:
    ```
    Option 1: Get page ranking by unique hits
    Option 2: Get page ranking by number of users
    Option 3: Get user by unique page views
    Option 4: Exit
    Please choose an option: 
    ```
3. Choosing option 1-3 will retrieve the rankings generated by parsing the CSV. Choosing option 4 will gracefully exit the program. Entering any other input will result in an error or ungraceful exit.

Running Tests
------------
There are three test files:
   - test.csv: An 11 line CSV used for testing success paths
   - invalidLine.csv: A single line CSV with 4 entries used to test CSV validity
   - invalidTimestamp.csv: A single line CSV with an invalid timestamp
To run the tests: run the below from the program root (i.e same location as the program's pom.xml)
```
    mvn clean test
```
Alternatively, you may run tests as well as invoke the program (if all tests succeed) by running the following command from the program root
```
    mvn clean test install
```